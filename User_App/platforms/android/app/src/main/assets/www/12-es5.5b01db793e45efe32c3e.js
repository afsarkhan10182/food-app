(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{qqR4:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("mrSG"),o=t("r28Q"),s=t("ZZ/e"),i=t("gTw3"),r=t("23JA"),a=function(){function n(n,l,t,e,u,o,s){this.route=n,this.server=l,this.toastController=t,this.nav=e,this.loadingController=u,this.geolocation=o,this.nativeGeocoder=s,this.text=JSON.parse(localStorage.getItem("app_text"))}return n.prototype.ngOnInit=function(){this.loadMap()},n.prototype.loadMap=function(){return u.b(this,void 0,void 0,(function(){var n=this;return u.e(this,(function(l){return this.geolocation.getCurrentPosition().then((function(l){var t={center:new google.maps.LatLng(l.coords.latitude,l.coords.longitude),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};n.getAddressFromCoords(l.coords.latitude,l.coords.longitude),n.map=new google.maps.Map(n.mapElement.nativeElement,t),n.map.addListener("tilesloaded",(function(){n.getAddressFromCoords(n.map.center.lat(),n.map.center.lng())}))})).catch((function(n){console.log("Error getting location",n)})),[2]}))}))},n.prototype.getAddressFromCoords=function(n,l){return u.b(this,void 0,void 0,(function(){var t=this;return u.e(this,(function(e){return console.log("getAddressFromCoords "+n+" "+l),this.nativeGeocoder.reverseGeocode(n,l,{useLocale:!0,maxResults:5}).then((function(n){t.address="";for(var l=[],e=0,u=Object.entries(n[0]);e<u.length;e++)(i=u[e][1]).length>0&&l.push(i);l.reverse();for(var o=0,s=l;o<s.length;o++){var i;t.address+=(i=s[o])+", "}t.address=t.address.slice(0,-2)})).catch((function(n){t.address="Address Not Available!"})),[2]}))}))},n.prototype.saveAddress=function(n){return u.b(this,void 0,void 0,(function(){var l,t,e=this;return u.e(this,(function(u){switch(u.label){case 0:return[4,this.loadingController.create({message:"Please wait..."})];case 1:return[4,(l=u.sent()).present()];case 2:return u.sent(),t={address:n.address,lat:this.map.center.lat(),lng:this.map.center.lng(),user_id:localStorage.getItem("user_id")},this.server.saveAddress(t).subscribe((function(n){e.nav.navigateBack("checkout"),e.presentToast("Address Saved Successfully."),l.dismiss()})),[2]}}))}))},n.prototype.presentToast=function(n){return u.b(this,void 0,void 0,(function(){return u.e(this,(function(l){switch(l.label){case 0:return[4,this.toastController.create({message:n,duration:3e3,position:"top",mode:"ios",color:"dark"})];case 1:return l.sent().present(),[2]}}))}))},n}(),d=function(){return function(){}}(),b=t("pMnS"),c=t("oBZk"),p=t("gIcY"),g=t("ZYCi"),h=e.rb({encapsulation:0,styles:[["#map_canvas[_ngcontent-%COMP%]{width:90%;height:60%;border:1px solid red}#address[_ngcontent-%COMP%]{padding:10px;font-size:18px;font-weight:700}#map[_ngcontent-%COMP%]{width:100%;height:60vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}"]],data:{}});function m(n){return e.Lb(0,[e.Ib(671088640,1,{mapElement:0}),(n()(),e.tb(1,0,null,null,17,"ion-header",[],null,null,null,c.mb,c.r)),e.sb(2,49152,null,0,s.D,[e.h,e.k,e.z],null,null),(n()(),e.tb(3,0,null,0,15,"ion-toolbar",[["color","primary"]],null,null,null,c.Pb,c.U)),e.sb(4,49152,null,0,s.Eb,[e.h,e.k,e.z],{color:[0,"color"]},null),(n()(),e.tb(5,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,c.ab,c.f)),e.sb(6,49152,null,0,s.n,[e.h,e.k,e.z],null,null),(n()(),e.tb(7,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e.Fb(n,9).onClick(t)&&u),u}),c.W,c.b)),e.sb(8,49152,null,0,s.i,[e.h,e.k,e.z],null,null),e.sb(9,16384,null,0,s.j,[[2,s.kb],s.Kb],null,null),(n()(),e.tb(10,0,null,0,6,"ion-buttons",[["slot","end"]],null,null,null,c.ab,c.f)),e.sb(11,49152,null,0,s.n,[e.h,e.k,e.z],null,null),(n()(),e.tb(12,0,null,0,4,"ion-button",[["fill","outline"],["shape","round"],["style","font-size: 12px"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.loadMap()&&e),e}),c.Z,c.e)),e.sb(13,49152,null,0,s.m,[e.h,e.k,e.z],{fill:[0,"fill"],shape:[1,"shape"]},null),(n()(),e.tb(14,0,null,0,1,"ion-icon",[["name","locate"],["slot","start"]],null,null,null,c.nb,c.s)),e.sb(15,49152,null,0,s.E,[e.h,e.k,e.z],{name:[0,"name"]},null),(n()(),e.Kb(-1,0,[" Locate Me "])),(n()(),e.tb(17,0,null,0,1,"ion-title",[],null,null,null,c.Nb,c.S)),e.sb(18,49152,null,0,s.Cb,[e.h,e.k,e.z],null,null),(n()(),e.tb(19,0,null,null,29,"ion-content",[],null,null,null,c.ib,c.n)),e.sb(20,49152,null,0,s.w,[e.h,e.k,e.z],null,null),(n()(),e.tb(21,0,null,0,3,"div",[["class","map-wrapper"]],null,null,null,null,null)),(n()(),e.tb(22,0,null,null,1,"div",[["id","map_center"]],null,null,null,null,null)),(n()(),e.tb(23,0,null,null,0,"img",[["src","assets/map-marker.png"],["width","30px"]],null,null,null,null,null)),(n()(),e.tb(24,0,[[1,0],["map",1]],null,0,"div",[["id","map"]],null,null,null,null,null)),(n()(),e.tb(25,0,null,0,23,"div",[["id","address"]],null,null,null,null,null)),(n()(),e.tb(26,0,null,null,22,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,l,t){var u=!0,o=n.component;return"submit"===l&&(u=!1!==e.Fb(n,28).onSubmit(t)&&u),"reset"===l&&(u=!1!==e.Fb(n,28).onReset()&&u),"ngSubmit"===l&&(u=!1!==o.saveAddress(e.Fb(n,28).value)&&u),u}),null,null)),e.sb(27,16384,null,0,p.m,[],null,null),e.sb(28,4210688,[["form",4]],0,p.h,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),e.Hb(2048,null,p.a,null,[p.h]),e.sb(30,16384,null,0,p.g,[[4,p.a]],null,null),(n()(),e.tb(31,0,null,null,13,"ion-item",[],null,null,null,c.pb,c.u)),e.sb(32,49152,null,0,s.J,[e.h,e.k,e.z],null,null),(n()(),e.tb(33,0,null,0,2,"ion-label",[["position","floating"]],null,null,null,c.qb,c.v)),e.sb(34,49152,null,0,s.P,[e.h,e.k,e.z],{position:[0,"position"]},null),(n()(),e.Kb(35,0,["",""])),(n()(),e.tb(36,0,null,0,8,"ion-textarea",[["name","address"],["required",""]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==e.Fb(n,39)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Fb(n,39)._handleInputEvent(t.target)&&u),"ngModelChange"===l&&(u=!1!==(o.address=t)&&u),u}),c.Lb,c.Q)),e.sb(37,16384,null,0,p.j,[],{required:[0,"required"]},null),e.Hb(1024,null,p.c,(function(n){return[n]}),[p.j]),e.sb(39,16384,null,0,s.Rb,[e.k],null,null),e.Hb(1024,null,p.d,(function(n){return[n]}),[s.Rb]),e.sb(41,671744,null,0,p.i,[[2,p.a],[6,p.c],[8,null],[6,p.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Hb(2048,null,p.e,null,[p.i]),e.sb(43,16384,null,0,p.f,[[4,p.e]],null,null),e.sb(44,49152,null,0,s.Ab,[e.h,e.k,e.z],{name:[0,"name"],required:[1,"required"]},null),(n()(),e.tb(45,0,null,null,3,"div",[["class","ion-padding"]],null,null,null,null,null)),(n()(),e.tb(46,0,null,null,2,"ion-button",[["expand","block"],["mode","ios"],["type","submit"]],null,null,null,c.Z,c.e)),e.sb(47,49152,null,0,s.m,[e.h,e.k,e.z],{disabled:[0,"disabled"],expand:[1,"expand"],mode:[2,"mode"],type:[3,"type"]},null),(n()(),e.Kb(48,0,["",""]))],(function(n,l){var t=l.component;n(l,4,0,"primary"),n(l,13,0,"outline","round"),n(l,15,0,"locate"),n(l,34,0,"floating"),n(l,37,0,""),n(l,41,0,"address",t.address),n(l,44,0,"address",""),n(l,47,0,!e.Fb(l,28).valid,"block","ios","submit")}),(function(n,l){var t=l.component;n(l,26,0,e.Fb(l,30).ngClassUntouched,e.Fb(l,30).ngClassTouched,e.Fb(l,30).ngClassPristine,e.Fb(l,30).ngClassDirty,e.Fb(l,30).ngClassValid,e.Fb(l,30).ngClassInvalid,e.Fb(l,30).ngClassPending),n(l,35,0,t.text.add_address),n(l,36,0,e.Fb(l,37).required?"":null,e.Fb(l,43).ngClassUntouched,e.Fb(l,43).ngClassTouched,e.Fb(l,43).ngClassPristine,e.Fb(l,43).ngClassDirty,e.Fb(l,43).ngClassValid,e.Fb(l,43).ngClassInvalid,e.Fb(l,43).ngClassPending),n(l,48,0,t.text.add_button)}))}function v(n){return e.Lb(0,[(n()(),e.tb(0,0,null,null,1,"app-address",[],null,null,null,m,h)),e.sb(1,114688,null,0,a,[g.a,o.a,s.Sb,s.Kb,s.Ib,i.a,r.a],null,null)],(function(n,l){n(l,1,0)}),null)}var f=e.pb("app-address",a,v,{},{},[]),C=t("Ip0R");t.d(l,"AddressPageModuleNgFactory",(function(){return k}));var k=e.qb(d,[],(function(n){return e.Cb([e.Db(512,e.j,e.bb,[[8,[b.a,f]],[3,e.j],e.x]),e.Db(4608,C.k,C.j,[e.u,[2,C.q]]),e.Db(4608,p.l,p.l,[]),e.Db(4608,s.b,s.b,[e.z,e.g]),e.Db(4608,s.Jb,s.Jb,[s.b,e.j,e.q]),e.Db(4608,s.Nb,s.Nb,[s.b,e.j,e.q]),e.Db(1073742336,C.b,C.b,[]),e.Db(1073742336,p.k,p.k,[]),e.Db(1073742336,p.b,p.b,[]),e.Db(1073742336,s.Gb,s.Gb,[]),e.Db(1073742336,g.p,g.p,[[2,g.u],[2,g.m]]),e.Db(1073742336,d,d,[]),e.Db(1024,g.k,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);