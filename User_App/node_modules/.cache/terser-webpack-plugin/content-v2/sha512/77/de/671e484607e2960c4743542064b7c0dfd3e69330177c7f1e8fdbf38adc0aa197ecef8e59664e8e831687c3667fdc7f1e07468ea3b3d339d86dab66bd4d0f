{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{qqR4:function(l,n,e){\"use strict\";e.r(n);var u=e(\"8Y7J\"),t=e(\"mrSG\"),o=e(\"r28Q\"),s=e(\"ZZ/e\"),i=e(\"gTw3\"),r=e(\"23JA\");class a{constructor(l,n,e,u,t,o,s){this.route=l,this.server=n,this.toastController=e,this.nav=u,this.loadingController=t,this.geolocation=o,this.nativeGeocoder=s,this.text=JSON.parse(localStorage.getItem(\"app_text\"))}ngOnInit(){this.loadMap()}loadMap(){return t.b(this,void 0,void 0,(function*(){this.geolocation.getCurrentPosition().then(l=>{let n={center:new google.maps.LatLng(l.coords.latitude,l.coords.longitude),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};this.getAddressFromCoords(l.coords.latitude,l.coords.longitude),this.map=new google.maps.Map(this.mapElement.nativeElement,n),this.map.addListener(\"tilesloaded\",()=>{this.getAddressFromCoords(this.map.center.lat(),this.map.center.lng())})}).catch(l=>{console.log(\"Error getting location\",l)})}))}getAddressFromCoords(l,n){return t.b(this,void 0,void 0,(function*(){console.log(\"getAddressFromCoords \"+l+\" \"+n),this.nativeGeocoder.reverseGeocode(l,n,{useLocale:!0,maxResults:5}).then(l=>{this.address=\"\";let n=[];for(let[e,u]of Object.entries(l[0]))u.length>0&&n.push(u);n.reverse();for(let e of n)this.address+=e+\", \";this.address=this.address.slice(0,-2)}).catch(l=>{this.address=\"Address Not Available!\"})}))}saveAddress(l){return t.b(this,void 0,void 0,(function*(){const n=yield this.loadingController.create({message:\"Please wait...\"});yield n.present();var e={address:l.address,lat:this.map.center.lat(),lng:this.map.center.lng(),user_id:localStorage.getItem(\"user_id\")};this.server.saveAddress(e).subscribe(l=>{this.nav.navigateBack(\"checkout\"),this.presentToast(\"Address Saved Successfully.\"),n.dismiss()})}))}presentToast(l){return t.b(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,duration:3e3,position:\"top\",mode:\"ios\",color:\"dark\"})).present()}))}}class d{}var b=e(\"pMnS\"),c=e(\"oBZk\"),p=e(\"s7LF\"),g=e(\"iInd\"),h=u.pb({encapsulation:0,styles:[[\"#map_canvas[_ngcontent-%COMP%]{width:90%;height:60%;border:1px solid red}#address[_ngcontent-%COMP%]{padding:10px;font-size:18px;font-weight:700}#map[_ngcontent-%COMP%]{width:100%;height:60vh}.map-wrapper[_ngcontent-%COMP%]{position:relative}.map-wrapper[_ngcontent-%COMP%]   #map_center[_ngcontent-%COMP%]{position:absolute;z-index:99;height:40px;width:40px;top:50%;left:50%;margin-left:-21px;margin-top:-41px}\"]],data:{}});function m(l){return u.Jb(0,[u.Gb(671088640,1,{mapElement:0}),(l()(),u.rb(1,0,null,null,17,\"ion-header\",[],null,null,null,c.mb,c.r)),u.qb(2,49152,null,0,s.D,[u.h,u.k,u.x],null,null),(l()(),u.rb(3,0,null,0,15,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,c.Pb,c.U)),u.qb(4,49152,null,0,s.Eb,[u.h,u.k,u.x],{color:[0,\"color\"]},null),(l()(),u.rb(5,0,null,0,4,\"ion-buttons\",[[\"slot\",\"start\"]],null,null,null,c.ab,c.f)),u.qb(6,49152,null,0,s.n,[u.h,u.k,u.x],null,null),(l()(),u.rb(7,0,null,0,2,\"ion-back-button\",[],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==u.Db(l,9).onClick(e)&&t),t}),c.W,c.b)),u.qb(8,49152,null,0,s.i,[u.h,u.k,u.x],null,null),u.qb(9,16384,null,0,s.j,[[2,s.kb],s.Kb],null,null),(l()(),u.rb(10,0,null,0,6,\"ion-buttons\",[[\"slot\",\"end\"]],null,null,null,c.ab,c.f)),u.qb(11,49152,null,0,s.n,[u.h,u.k,u.x],null,null),(l()(),u.rb(12,0,null,0,4,\"ion-button\",[[\"fill\",\"outline\"],[\"shape\",\"round\"],[\"style\",\"font-size: 12px\"]],null,[[null,\"click\"]],(function(l,n,e){var u=!0;return\"click\"===n&&(u=!1!==l.component.loadMap()&&u),u}),c.Z,c.e)),u.qb(13,49152,null,0,s.m,[u.h,u.k,u.x],{fill:[0,\"fill\"],shape:[1,\"shape\"]},null),(l()(),u.rb(14,0,null,0,1,\"ion-icon\",[[\"name\",\"locate\"],[\"slot\",\"start\"]],null,null,null,c.nb,c.s)),u.qb(15,49152,null,0,s.E,[u.h,u.k,u.x],{name:[0,\"name\"]},null),(l()(),u.Ib(-1,0,[\" Locate Me \"])),(l()(),u.rb(17,0,null,0,1,\"ion-title\",[],null,null,null,c.Nb,c.S)),u.qb(18,49152,null,0,s.Cb,[u.h,u.k,u.x],null,null),(l()(),u.rb(19,0,null,null,29,\"ion-content\",[],null,null,null,c.ib,c.n)),u.qb(20,49152,null,0,s.w,[u.h,u.k,u.x],null,null),(l()(),u.rb(21,0,null,0,3,\"div\",[[\"class\",\"map-wrapper\"]],null,null,null,null,null)),(l()(),u.rb(22,0,null,null,1,\"div\",[[\"id\",\"map_center\"]],null,null,null,null,null)),(l()(),u.rb(23,0,null,null,0,\"img\",[[\"src\",\"assets/map-marker.png\"],[\"width\",\"30px\"]],null,null,null,null,null)),(l()(),u.rb(24,0,[[1,0],[\"map\",1]],null,0,\"div\",[[\"id\",\"map\"]],null,null,null,null,null)),(l()(),u.rb(25,0,null,0,23,\"div\",[[\"id\",\"address\"]],null,null,null,null,null)),(l()(),u.rb(26,0,null,null,22,\"form\",[[\"novalidate\",\"\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngSubmit\"],[null,\"submit\"],[null,\"reset\"]],(function(l,n,e){var t=!0,o=l.component;return\"submit\"===n&&(t=!1!==u.Db(l,28).onSubmit(e)&&t),\"reset\"===n&&(t=!1!==u.Db(l,28).onReset()&&t),\"ngSubmit\"===n&&(t=!1!==o.saveAddress(u.Db(l,28).value)&&t),t}),null,null)),u.qb(27,16384,null,0,p.m,[],null,null),u.qb(28,4210688,[[\"form\",4]],0,p.h,[[8,null],[8,null]],null,{ngSubmit:\"ngSubmit\"}),u.Fb(2048,null,p.a,null,[p.h]),u.qb(30,16384,null,0,p.g,[[4,p.a]],null,null),(l()(),u.rb(31,0,null,null,13,\"ion-item\",[],null,null,null,c.pb,c.u)),u.qb(32,49152,null,0,s.J,[u.h,u.k,u.x],null,null),(l()(),u.rb(33,0,null,0,2,\"ion-label\",[[\"position\",\"floating\"]],null,null,null,c.qb,c.v)),u.qb(34,49152,null,0,s.P,[u.h,u.k,u.x],{position:[0,\"position\"]},null),(l()(),u.Ib(35,0,[\"\",\"\"])),(l()(),u.rb(36,0,null,0,8,\"ion-textarea\",[[\"name\",\"address\"],[\"required\",\"\"]],[[1,\"required\",0],[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngModelChange\"],[null,\"ionBlur\"],[null,\"ionChange\"]],(function(l,n,e){var t=!0,o=l.component;return\"ionBlur\"===n&&(t=!1!==u.Db(l,39)._handleBlurEvent(e.target)&&t),\"ionChange\"===n&&(t=!1!==u.Db(l,39)._handleInputEvent(e.target)&&t),\"ngModelChange\"===n&&(t=!1!==(o.address=e)&&t),t}),c.Lb,c.Q)),u.qb(37,16384,null,0,p.j,[],{required:[0,\"required\"]},null),u.Fb(1024,null,p.c,(function(l){return[l]}),[p.j]),u.qb(39,16384,null,0,s.Rb,[u.k],null,null),u.Fb(1024,null,p.d,(function(l){return[l]}),[s.Rb]),u.qb(41,671744,null,0,p.i,[[2,p.a],[6,p.c],[8,null],[6,p.d]],{name:[0,\"name\"],model:[1,\"model\"]},{update:\"ngModelChange\"}),u.Fb(2048,null,p.e,null,[p.i]),u.qb(43,16384,null,0,p.f,[[4,p.e]],null,null),u.qb(44,49152,null,0,s.Ab,[u.h,u.k,u.x],{name:[0,\"name\"],required:[1,\"required\"]},null),(l()(),u.rb(45,0,null,null,3,\"div\",[[\"class\",\"ion-padding\"]],null,null,null,null,null)),(l()(),u.rb(46,0,null,null,2,\"ion-button\",[[\"expand\",\"block\"],[\"mode\",\"ios\"],[\"type\",\"submit\"]],null,null,null,c.Z,c.e)),u.qb(47,49152,null,0,s.m,[u.h,u.k,u.x],{disabled:[0,\"disabled\"],expand:[1,\"expand\"],mode:[2,\"mode\"],type:[3,\"type\"]},null),(l()(),u.Ib(48,0,[\"\",\"\"]))],(function(l,n){var e=n.component;l(n,4,0,\"primary\"),l(n,13,0,\"outline\",\"round\"),l(n,15,0,\"locate\"),l(n,34,0,\"floating\"),l(n,37,0,\"\"),l(n,41,0,\"address\",e.address),l(n,44,0,\"address\",\"\"),l(n,47,0,!u.Db(n,28).valid,\"block\",\"ios\",\"submit\")}),(function(l,n){var e=n.component;l(n,26,0,u.Db(n,30).ngClassUntouched,u.Db(n,30).ngClassTouched,u.Db(n,30).ngClassPristine,u.Db(n,30).ngClassDirty,u.Db(n,30).ngClassValid,u.Db(n,30).ngClassInvalid,u.Db(n,30).ngClassPending),l(n,35,0,e.text.add_address),l(n,36,0,u.Db(n,37).required?\"\":null,u.Db(n,43).ngClassUntouched,u.Db(n,43).ngClassTouched,u.Db(n,43).ngClassPristine,u.Db(n,43).ngClassDirty,u.Db(n,43).ngClassValid,u.Db(n,43).ngClassInvalid,u.Db(n,43).ngClassPending),l(n,48,0,e.text.add_button)}))}function v(l){return u.Jb(0,[(l()(),u.rb(0,0,null,null,1,\"app-address\",[],null,null,null,m,h)),u.qb(1,114688,null,0,a,[g.a,o.a,s.Sb,s.Kb,s.Ib,i.a,r.a],null,null)],(function(l,n){l(n,1,0)}),null)}var f=u.nb(\"app-address\",a,v,{},{},[]),C=e(\"SVse\");e.d(n,\"AddressPageModuleNgFactory\",(function(){return k}));var k=u.ob(d,[],(function(l){return u.Ab([u.Bb(512,u.j,u.Z,[[8,[b.a,f]],[3,u.j],u.v]),u.Bb(4608,C.k,C.j,[u.s,[2,C.q]]),u.Bb(4608,p.l,p.l,[]),u.Bb(4608,s.b,s.b,[u.x,u.g]),u.Bb(4608,s.Jb,s.Jb,[s.b,u.j,u.p]),u.Bb(4608,s.Nb,s.Nb,[s.b,u.j,u.p]),u.Bb(1073742336,C.b,C.b,[]),u.Bb(1073742336,p.k,p.k,[]),u.Bb(1073742336,p.b,p.b,[]),u.Bb(1073742336,s.Gb,s.Gb,[]),u.Bb(1073742336,g.p,g.p,[[2,g.u],[2,g.m]]),u.Bb(1073742336,d,d,[]),u.Bb(1024,g.k,(function(){return[[{path:\"\",component:a}]]}),[])])}))}}]);","extractedComments":[]}